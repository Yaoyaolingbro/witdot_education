# ğŸš€ witdot Education AI Platform - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹

æœ¬æ–‡æ¡£æä¾›åœ¨æœåŠ¡å™¨ **47.96.174.6** ä¸Šéƒ¨ç½² witdot Education AI Platform çš„å®Œæ•´æŒ‡å—ã€‚

## ğŸ“‹ ç›®å½•

- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [æœåŠ¡å™¨å‡†å¤‡](#æœåŠ¡å™¨å‡†å¤‡)
- [å®‰è£…ä¾èµ–](#å®‰è£…ä¾èµ–)
- [éƒ¨ç½²æ­¥éª¤](#éƒ¨ç½²æ­¥éª¤)
- [Nginx é…ç½®](#nginx-é…ç½®)
- [PM2 è¿›ç¨‹ç®¡ç†](#pm2-è¿›ç¨‹ç®¡ç†)
- [SSLè¯ä¹¦é…ç½®](#sslè¯ä¹¦é…ç½®)
- [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### æœ€ä½é…ç½®
- **CPU**: 2æ ¸
- **å†…å­˜**: 4GB
- **ç£ç›˜**: 20GB å¯ç”¨ç©ºé—´
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 7+
- **ç½‘ç»œ**: å…¬ç½‘IPï¼Œå¼€æ”¾ç«¯å£ 80ã€443

### è½¯ä»¶è¦æ±‚
- Node.js 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- MongoDB 6.x
- Nginx 1.18+
- PM2ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰
- Git

---

## ğŸ–¥ æœåŠ¡å™¨å‡†å¤‡

### 1. è¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@47.96.174.6
```

### 2. æ›´æ–°ç³»ç»Ÿ

```bash
# Ubuntu/Debian
sudo apt update && sudo apt upgrade -y

# CentOS/RHEL
sudo yum update -y
```

### 3. åˆ›å»ºåº”ç”¨ç”¨æˆ·ï¼ˆå¯é€‰ä½†æ¨èï¼‰

```bash
# åˆ›å»ºä¸“ç”¨ç”¨æˆ·
sudo adduser eduapp
sudo usermod -aG sudo eduapp

# åˆ‡æ¢åˆ°åº”ç”¨ç”¨æˆ·
su - eduapp
```

---

## ğŸ“¦ å®‰è£…ä¾èµ–

### 1. å®‰è£… Node.js 18.x

```bash
# ä½¿ç”¨ NodeSource ä»“åº“
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# éªŒè¯å®‰è£…
node --version  # åº”æ˜¾ç¤º v18.x.x
npm --version   # åº”æ˜¾ç¤º 9.x.x
```

### 2. å®‰è£… MongoDB 6.x

```bash
# å¯¼å…¥ MongoDB GPG å…¬é’¥
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -

# æ·»åŠ  MongoDB ä»“åº“
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# å®‰è£… MongoDB
sudo apt update
sudo apt install -y mongodb-org

# å¯åŠ¨ MongoDB æœåŠ¡
sudo systemctl start mongod
sudo systemctl enable mongod

# éªŒè¯å®‰è£…
sudo systemctl status mongod
mongosh --version
```

### 3. å®‰è£… Nginx

```bash
sudo apt install -y nginx

# å¯åŠ¨ Nginx
sudo systemctl start nginx
sudo systemctl enable nginx

# éªŒè¯å®‰è£…
nginx -v
```

### 4. å®‰è£… PM2ï¼ˆNode.js è¿›ç¨‹ç®¡ç†å™¨ï¼‰

```bash
sudo npm install -g pm2

# éªŒè¯å®‰è£…
pm2 --version
```

### 5. å®‰è£… Git

```bash
sudo apt install -y git

# éªŒè¯å®‰è£…
git --version
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. å…‹éš†é¡¹ç›®ä»£ç 

```bash
# è¿›å…¥åº”ç”¨ç›®å½•
cd /var/www

# å…‹éš†ä»£ç ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€ï¼‰
sudo git clone <your-repository-url> eduapp
sudo chown -R $USER:$USER eduapp
cd eduapp
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

#### åç«¯ç¯å¢ƒå˜é‡

```bash
cd /var/www/eduapp/server
cp .env.example .env
nano .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°ï¼š

```env
# æœåŠ¡å™¨é…ç½®
PORT=3210
NODE_ENV=production
HOST=0.0.0.0

# MongoDB é…ç½®
MONGODB_URI=mongodb://localhost:27017/edu_app_prod

# JWT é…ç½®
JWT_SECRET=your-production-secret-key-change-this-to-random-string
JWT_EXPIRES_IN=7d

# Claude API é…ç½®
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# CORS é…ç½®
CORS_ORIGIN=https://your-domain.com

# æ—¥å¿—é…ç½®
LOG_LEVEL=info
```

#### å‰ç«¯ç¯å¢ƒå˜é‡

```bash
cd /var/www/eduapp/client
nano .env.production
```

åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š

```env
# API åŸºç¡€åœ°å€
VITE_API_URL=https://your-domain.com/api

# æˆ–ä½¿ç”¨ IP åœ°å€
# VITE_API_URL=http://47.96.174.6:3210/api
```

### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd /var/www/eduapp/server
npm install --production

# å®‰è£…å‰ç«¯ä¾èµ–å¹¶æ„å»º
cd /var/www/eduapp/client
npm install
npm run build
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
cd /var/www/eduapp/server

# è¿è¡Œè¯¾ç¨‹åŒæ­¥è„šæœ¬
node src/scripts/syncCourses.js
```

### 5. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆä½¿ç”¨ PM2ï¼‰

```bash
cd /var/www/eduapp/server

# ä½¿ç”¨ PM2 å¯åŠ¨åº”ç”¨
pm2 start src/app.js --name "eduapp-server" --watch

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs eduapp-server
```

### 6. é…ç½® PM2 å¼€æœºè‡ªå¯

```bash
# ä¿å­˜ PM2 è¿›ç¨‹åˆ—è¡¨
pm2 save

# ç”Ÿæˆå¼€æœºå¯åŠ¨è„šæœ¬
pm2 startup

# æŒ‰ç…§æç¤ºæ‰§è¡Œå‘½ä»¤ï¼ˆé€šå¸¸æ˜¯ä¸€æ¡ sudo å‘½ä»¤ï¼‰
```

---

## âš™ï¸ Nginx é…ç½®

### 1. åˆ›å»º Nginx é…ç½®æ–‡ä»¶

```bash
sudo nano /etc/nginx/sites-available/eduapp
```

### 2. åŸºç¡€é…ç½®ï¼ˆHTTPï¼‰

```nginx
server {
    listen 80;
    server_name 47.96.174.6 your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»¶
    root /var/www/eduapp/client/dist;
    index index.html;

    # æ—¥å¿—é…ç½®
    access_log /var/log/nginx/eduapp-access.log;
    error_log /var/log/nginx/eduapp-error.log;

    # Gzip å‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    gzip_comp_level 6;

    # å‰ç«¯è·¯ç”±
    location / {
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location /api {
        proxy_pass http://localhost:3210;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;

        # è¶…æ—¶é…ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # é™æ€èµ„æºï¼ˆè¯¾ç¨‹æ–‡ä»¶ç­‰ï¼‰
    location /public {
        alias /var/www/eduapp/server/public;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # ç¼“å­˜é™æ€èµ„æº
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3. å¯ç”¨é…ç½®å¹¶é‡å¯ Nginx

```bash
# åˆ›å»ºç¬¦å·é“¾æ¥
sudo ln -s /etc/nginx/sites-available/eduapp /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status nginx
```

### 4. é˜²ç«å¢™é…ç½®

```bash
# Ubuntu UFW
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp
sudo ufw enable

# CentOS firewalld
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

---

## ğŸ”’ SSL è¯ä¹¦é…ç½®ï¼ˆHTTPSï¼‰

### æ–¹å¼1ï¼šä½¿ç”¨ Let's Encryptï¼ˆå…è´¹ï¼‰

```bash
# å®‰è£… Certbot
sudo apt install -y certbot python3-certbot-nginx

# è·å–è¯ä¹¦ï¼ˆè‡ªåŠ¨é…ç½® Nginxï¼‰
sudo certbot --nginx -d your-domain.com -d www.your-domain.com

# æµ‹è¯•è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

### æ–¹å¼2ï¼šä½¿ç”¨è‡ªæœ‰è¯ä¹¦

```bash
# ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨
sudo mkdir -p /etc/nginx/ssl
sudo cp your-certificate.crt /etc/nginx/ssl/
sudo cp your-private-key.key /etc/nginx/ssl/
```

ä¿®æ”¹ Nginx é…ç½®æ·»åŠ  HTTPSï¼š

```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /etc/nginx/ssl/your-certificate.crt;
    ssl_certificate_key /etc/nginx/ssl/your-private-key.key;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # å…¶ä»–é…ç½®åŒä¸Š...
}

# HTTP é‡å®šå‘åˆ° HTTPS
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}
```

---

## ğŸ“Š PM2 è¿›ç¨‹ç®¡ç†

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹
pm2 list

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
pm2 show eduapp-server

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs eduapp-server

# é‡å¯åº”ç”¨
pm2 restart eduapp-server

# åœæ­¢åº”ç”¨
pm2 stop eduapp-server

# åˆ é™¤åº”ç”¨
pm2 delete eduapp-server

# é‡è½½åº”ç”¨ï¼ˆé›¶åœæœºæ—¶é—´ï¼‰
pm2 reload eduapp-server

# æ¸…é™¤æ—¥å¿—
pm2 flush
```

### PM2 é…ç½®æ–‡ä»¶ï¼ˆecosystem.config.jsï¼‰

åˆ›å»ºé…ç½®æ–‡ä»¶ä»¥ä¾¿æ›´å¥½åœ°ç®¡ç†ï¼š

```bash
cd /var/www/eduapp/server
nano ecosystem.config.js
```

å†…å®¹ï¼š

```javascript
module.exports = {
  apps: [{
    name: 'eduapp-server',
    script: './src/app.js',
    instances: 2,  // å¤šå®ä¾‹ï¼ˆé›†ç¾¤æ¨¡å¼ï¼‰
    exec_mode: 'cluster',
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production',
      PORT: 3210
    },
    error_file: './logs/pm2-error.log',
    out_file: './logs/pm2-out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    autorestart: true,
    max_restarts: 10,
    min_uptime: '10s'
  }]
};
```

ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨ï¼š

```bash
pm2 start ecosystem.config.js
pm2 save
```

---

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### å¿«é€Ÿæ›´æ–°è„šæœ¬

åˆ›å»ºæ›´æ–°è„šæœ¬ï¼š

```bash
nano /var/www/eduapp/deploy.sh
```

å†…å®¹ï¼š

```bash
#!/bin/bash

echo "ğŸš€ Starting deployment..."

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/eduapp

# æ‹‰å–æœ€æ–°ä»£ç 
echo "ğŸ“¥ Pulling latest code..."
git pull origin main

# æ›´æ–°åç«¯
echo "ğŸ”§ Updating backend..."
cd server
npm install --production

# æ›´æ–°å‰ç«¯
echo "ğŸ¨ Building frontend..."
cd ../client
npm install
npm run build

# é‡å¯æœåŠ¡
echo "ğŸ”„ Restarting services..."
pm2 restart eduapp-server

echo "âœ… Deployment completed!"
```

èµ‹äºˆæ‰§è¡Œæƒé™ï¼š

```bash
chmod +x /var/www/eduapp/deploy.sh
```

æ‰§è¡Œæ›´æ–°ï¼š

```bash
cd /var/www/eduapp
./deploy.sh
```

---

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### 1. MongoDB ç›‘æ§

```bash
# æŸ¥çœ‹ MongoDB çŠ¶æ€
sudo systemctl status mongod

# è¿æ¥åˆ° MongoDB
mongosh

# æŸ¥çœ‹æ•°æ®åº“
show dbs
use edu_app_prod
show collections

# æŸ¥çœ‹ç”¨æˆ·æ•°
db.users.countDocuments()

# é€€å‡º
exit
```

### 2. ç£ç›˜ç©ºé—´ç›‘æ§

```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# æŸ¥çœ‹ç›®å½•å¤§å°
du -sh /var/www/eduapp
du -sh /var/log/nginx
```

### 3. æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹ Nginx æ—¥å¿—
sudo tail -f /var/log/nginx/eduapp-access.log
sudo tail -f /var/log/nginx/eduapp-error.log

# æŸ¥çœ‹ PM2 æ—¥å¿—
pm2 logs eduapp-server --lines 100

# æ¸…ç†æ—§æ—¥å¿—
sudo find /var/log/nginx -name "*.log" -type f -mtime +30 -delete
```

### 4. è®¾ç½®æ—¥å¿—è½®è½¬

```bash
sudo nano /etc/logrotate.d/eduapp
```

å†…å®¹ï¼š

```
/var/log/nginx/eduapp-*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        if [ -f /var/run/nginx.pid ]; then
            kill -USR1 `cat /var/run/nginx.pid`
        fi
    endscript
}
```

### 5. ç³»ç»Ÿç›‘æ§

```bash
# å®‰è£… htopï¼ˆå¯é€‰ï¼‰
sudo apt install -y htop

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop

# æŸ¥çœ‹ Node.js è¿›ç¨‹
pm2 monit
```

---

## ğŸ” å®‰å…¨åŠ å›º

### 1. MongoDB å®‰å…¨é…ç½®

```bash
# è¿æ¥åˆ° MongoDB
mongosh

# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
use admin
db.createUser({
  user: "admin",
  pwd: "strong-password-here",
  roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]
})

# åˆ›å»ºåº”ç”¨ç”¨æˆ·
use edu_app_prod
db.createUser({
  user: "eduapp",
  pwd: "app-password-here",
  roles: [ { role: "readWrite", db: "edu_app_prod" } ]
})

exit
```

å¯ç”¨ MongoDB è®¤è¯ï¼š

```bash
sudo nano /etc/mongod.conf
```

æ·»åŠ /ä¿®æ”¹ï¼š

```yaml
security:
  authorization: enabled
```

é‡å¯ MongoDBï¼š

```bash
sudo systemctl restart mongod
```

æ›´æ–° `.env` æ–‡ä»¶ä¸­çš„ MongoDB è¿æ¥å­—ç¬¦ä¸²ï¼š

```env
MONGODB_URI=mongodb://eduapp:app-password-here@localhost:27017/edu_app_prod?authSource=edu_app_prod
```

### 2. é…ç½®é˜²ç«å¢™

```bash
# åªå…è®¸å¿…è¦çš„ç«¯å£
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable

# æŸ¥çœ‹è§„åˆ™
sudo ufw status verbose
```

### 3. ç¦ç”¨ root SSH ç™»å½•ï¼ˆå¯é€‰ä½†æ¨èï¼‰

```bash
sudo nano /etc/ssh/sshd_config
```

ä¿®æ”¹ï¼š

```
PermitRootLogin no
PasswordAuthentication no  # å¼ºåˆ¶ä½¿ç”¨ SSH å¯†é’¥
```

é‡å¯ SSHï¼š

```bash
sudo systemctl restart sshd
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ— æ³•è®¿é—®ç½‘ç«™ï¼Ÿ

**æ’æŸ¥æ­¥éª¤ï¼š**

1. æ£€æŸ¥ Nginx çŠ¶æ€ï¼š
   ```bash
   sudo systemctl status nginx
   sudo nginx -t
   ```

2. æ£€æŸ¥åç«¯æœåŠ¡ï¼š
   ```bash
   pm2 status
   pm2 logs eduapp-server
   ```

3. æ£€æŸ¥é˜²ç«å¢™ï¼š
   ```bash
   sudo ufw status
   ```

4. æ£€æŸ¥ç«¯å£ç›‘å¬ï¼š
   ```bash
   sudo netstat -tuln | grep -E '80|443|3210'
   ```

### Q2: API è¯·æ±‚å¤±è´¥ï¼Ÿ

**æ£€æŸ¥ï¼š**

1. åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
2. MongoDB æ˜¯å¦è¿è¡Œ
3. ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®
4. Nginx ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®

```bash
# æµ‹è¯•åç«¯ API
curl http://localhost:3210/api/health

# æŸ¥çœ‹åç«¯æ—¥å¿—
pm2 logs eduapp-server
```

### Q3: MongoDB è¿æ¥å¤±è´¥ï¼Ÿ

```bash
# æ£€æŸ¥ MongoDB çŠ¶æ€
sudo systemctl status mongod

# æŸ¥çœ‹ MongoDB æ—¥å¿—
sudo tail -f /var/log/mongodb/mongod.log

# é‡å¯ MongoDB
sudo systemctl restart mongod
```

### Q4: å†…å­˜ä¸è¶³ï¼Ÿ

```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# å¢åŠ  swap ç©ºé—´
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# è°ƒæ•´ PM2 å®ä¾‹æ•°
pm2 scale eduapp-server 1
```

### Q5: ç«¯å£è¢«å ç”¨ï¼Ÿ

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo lsof -i :3210
sudo lsof -i :80

# æ€æ­»è¿›ç¨‹
sudo kill -9 <PID>
```

---

## ğŸ“ å¤‡ä»½ç­–ç•¥

### 1. æ•°æ®åº“å¤‡ä»½

åˆ›å»ºå¤‡ä»½è„šæœ¬ï¼š

```bash
sudo nano /usr/local/bin/backup-mongodb.sh
```

å†…å®¹ï¼š

```bash
#!/bin/bash

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/var/backups/mongodb"
mkdir -p $BACKUP_DIR

mongodump --uri="mongodb://eduapp:password@localhost:27017/edu_app_prod" --out="$BACKUP_DIR/backup_$DATE"

# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -type d -mtime +7 -exec rm -rf {} +

echo "Backup completed: $BACKUP_DIR/backup_$DATE"
```

è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š

```bash
sudo chmod +x /usr/local/bin/backup-mongodb.sh
sudo crontab -e
```

æ·»åŠ æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½ï¼š

```cron
0 2 * * * /usr/local/bin/backup-mongodb.sh >> /var/log/mongodb-backup.log 2>&1
```

### 2. ä»£ç å¤‡ä»½

```bash
# å¤‡ä»½æ•´ä¸ªåº”ç”¨ç›®å½•
tar -czf /var/backups/eduapp_$(date +%Y%m%d).tar.gz -C /var/www eduapp
```

---

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–

### 1. Nginx ç¼“å­˜é…ç½®

åœ¨ Nginx é…ç½®ä¸­æ·»åŠ ï¼š

```nginx
# ç¼“å­˜é…ç½®
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=api_cache:10m max_size=100m inactive=60m use_temp_path=off;

location /api {
    proxy_cache api_cache;
    proxy_cache_valid 200 5m;
    proxy_cache_bypass $http_cache_control;
    add_header X-Cache-Status $upstream_cache_status;
    # ... å…¶ä»–é…ç½®
}
```

### 2. PM2 é›†ç¾¤æ¨¡å¼

```bash
# ä½¿ç”¨å¤šä¸ª CPU æ ¸å¿ƒ
pm2 start ecosystem.config.js
pm2 scale eduapp-server 4  # 4ä¸ªå®ä¾‹
```

### 3. MongoDB ç´¢å¼•ä¼˜åŒ–

```javascript
// åœ¨ mongosh ä¸­åˆ›å»ºç´¢å¼•
use edu_app_prod

// ç”¨æˆ·è¡¨ç´¢å¼•
db.users.createIndex({ email: 1 }, { unique: true })
db.users.createIndex({ username: 1 }, { unique: true })

// è¯¾ç¨‹è®°å½•ç´¢å¼•
db.records.createIndex({ userId: 1, courseId: 1 }, { unique: true })
db.records.createIndex({ userId: 1, lastAccessedAt: -1 })

// å¯¹è¯è®°å½•ç´¢å¼•
db.conversations.createIndex({ userId: 1, lastActiveAt: -1 })
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](../README.md) - é¡¹ç›®æ¦‚è¿°
- [å¼€å‘è®¡åˆ’.md](./å¼€å‘è®¡åˆ’.md) - å¼€å‘è§„åˆ’
- [å¿«é€Ÿå¼€å§‹.md](./å¿«é€Ÿå¼€å§‹.md) - æœ¬åœ°å¼€å‘æŒ‡å—

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
2. å‚è€ƒå¸¸è§é—®é¢˜éƒ¨åˆ†
3. è”ç³» witdot Development Team

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**æœ€åæ›´æ–°**: 2025-10-29
**é€‚ç”¨æœåŠ¡å™¨**: 47.96.174.6 åŠå…¶ä»– Linux æœåŠ¡å™¨
